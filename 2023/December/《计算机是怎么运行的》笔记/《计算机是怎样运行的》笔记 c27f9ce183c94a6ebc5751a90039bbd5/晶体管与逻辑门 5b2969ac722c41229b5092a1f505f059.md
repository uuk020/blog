# 晶体管与逻辑门

晶体管有很多种类，我们这里想唠叨一种称之为MOS管的晶体管，也就是金属-氧化物-半导体场效应管，英文名为Metal-Oxide-Semiconductor Field-Effect Transistor ，简称MOS管

MOS管又主要分为`nMOS管`和`pMOS管`两种

- nMOS管 , nMOS管的简化符号如图所示:
    
    它的含义是当我们在G端施加高电压时，电压信号可以从D端传递到S端（近似于开关闭合），此时我们称该晶体管处于导通状态；当我们在G端施加低电压时，电压信号不可以从D端传递到S端（近似于开关断开），此时我们称该晶体管处于截止状态  
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled.png)
    
- pMOS管, pMOS管的简化符号如图所示：
    
    它的含义是当我们在G端施加高电压时，电压信号不可以从D端传递到S端（近似于开关断开），此时我们称该晶体管处于截止状态；当我们在G端施加低电压时，电压信号可以从D端传递到S端（近似于开关闭合），此时我们称该晶体管处于导通状态
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%201.png)
    

nMOS管和pMOS管相当于两个互补的开关，我们可以使用一个pMOS管`T₁`，一个nMOS管`T₂`来代替之前使用的继电器来搭建一个`反相器`:

![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%202.png)

- Vin 为逻辑0(低电压)时， T1 导通， T2 截止，V电源与 Vout 电压相同，为逻辑1
- Vin 为逻辑1(高电压)时， T1 截止， T2 导通， Vout 电压与接地电压相同，为逻辑0

科学家用这个符号来代表反相器或非门

![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%203.png)

MOS管只是近似地被看成一个电控开关，出于物理上的原因，nMOS管其实只适合传递低电压信号，使用它传递高电压信号会有一定程度的损失（这里的“损失”指输出电压稍低于V电源）；而pMOS管其实只适合传递高电压信号，使用它传递低电压信号会有一定程度的损失（这里的“损失”指输出电压稍高于0V）。也就是**nMOS管其实适合传输强0弱1，pMOS管适合传输强1弱0**。

一个nMOS管和一个pMOS管并联起来既能**传输强0，也能传输强1**

![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%204.png)

E横杠点的信号是E点的信号通过反相器产生的，则：

- 当E点为逻辑0时候， 则E横杠点则为逻辑1，pMOS管与nMOS管都为截止，Y点电压为高阻态
- 当E点为逻辑1时候， 则E横杠点则为逻辑0，pMOS管与nMOS管都为导通，
    - 当A点的信号为逻辑0时，信号可以通过nMOS管传递到Y点而没有损失
    - 当A点的信号为逻辑1时，信号可以通过pMOS管传递到Y点而没有损失

这个设备称为传输门（transmission gate），我们通过控制E点的电压，从而间接控制电压信号能否从A点传输到Y点

![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%205.png)

`反相器`和`传输门`都是只接受一个输入信号，产生一个输出信号的信号处理设备，它们也可以被称为`单输入逻辑门`

### 多个MOS管组合为开关网络

- 两个`nMOS管`串联起来
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%206.png)
    
    `T1`和`T2`均为`nMOS管`，它们是以串联的方式连接的。输入信号A作用于`T1`管的`G`端，输入信号B作用于`T2`管的`G`端
    
    只有 A , B都为逻辑1时候，信号才能在 D 端与 S 端传递，若输入信号一方为逻辑0，D 端与 S端无法传递信号
    
- 两个`nMOS管`并联起来
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%207.png)
    
      只要有 A 端或 B 端为逻辑 1， 信号都能从D 端与 S 端传递，除非A 端和 B 端都为0，T1和T2才会截止，信号不能从D 端与 S 端传递
    
- 两个`pMOS管`串联起来
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%208.png)
    
    只有输入信号A和B同时为低电压，或者说逻辑0的时候，这个由两个pMOS管串联的开关网络才算是导通，只要有一个输入信号为高电压，或者说逻辑1的时候，这个开关网络就算是截止
    
- 两个`pMOS管`并联起来
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%209.png)
    
     只有输入信号A和B同时为高电压，或者说逻辑1的时候，这个由两个pMOS管并联的开关网络才算是截止，只要有一个输入信号为低电压，或者说逻辑0的时候，这个开关网络就算是导通。
    
- `nMOS管`和`pMOS管`混合起来作为一个开关网络
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2010.png)
    
    `nMOS管`适合传输逻辑0，`pMOS管`适合传输逻辑1，所以由多个`nMOS管`组合而成的开关网络也只是用来传输逻辑0，由多个`pMOS管`组合而成的开关网络也只是用来传输逻辑1。如果把它们混合起来的话，在某些输入下可能导致信号质量降低
    
    `T1`是`pMOS`管，`T2`是`nMOS`管，如果它们串联之后作为一个开关网络的话，当输入信号A为逻辑0，输入信号B为逻辑1时，这个开关网络就导通了，这个导通的开关网络是用来在D端和S端传递逻辑0信号合适呢，还是传递逻辑1信号合适呢？很显然都不合适，都会有损失～
    

### 与非门和或非门

- 上拉网络中的两个`pMOS管`串联，下拉网络中的两个`nMOS管`也串联
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2011.png)
    
    - 当 A = 0， B = 0时，`T1`和`T2`导通，也就是上拉网络导通；`T3`和`T4`截止，也就是下拉网络截止，则输出信号Y为逻辑1
    - 当A=0，B=1时，`T1`导通，`T2`截止，因为`T1`和`T2`是串联的，所以整个上拉网络截止；`T3`截止，`T4`导通，因为`T3`和`T4`是串联的，所以整个下拉网络截止。此时输出信号Y进入高阻态
    - 当A=1，B=0时，`T1`截止，`T2`导通，所以整个上拉网络截止；`T3`导通，`T4`截止，所以整个下拉网络截止。此时输出信号Y进入高阻态
    - 当A=1，B=1时，`T1`和`T2`截止，也就是上拉网络截止；`T3`和`T4`导通，也就是下拉网络导通，则输出信号Y为逻辑0
- 上拉网络中的两个`pMOS管`并联，下拉网络中的两个`nMOS管`也并联：
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2012.png)
    
    当`A=0，B=1`或者`A=1，B=0`时，上拉网络和下拉网络将同时导通，那么Y点的电压并不是电源正极的电压，也不是电源负极的电压
    
- 上拉网络中的两个`pMOS管`并联，下拉网络中的两个`nMOS管`串联
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2013.png)
    
    - 当A=0，B=0时，`T1`和`T2`导通，也就是上拉网络导通；`T3`和`T4`截止，也就是下拉网络截止，则输出信号Y为逻辑1。
    - 当A=0，B=1时，`T1`导通，`T2`截止，因为`T1`和`T2`是并联的，所以整个上拉网络导通；`T3`截止，`T4`导通，因为`T3`和`T4`是串联的，所以整个下拉网络截止。此时输出信号Y也为逻辑1。
    - 当A=1，B=0时，`T1`截止，`T2`导通，所以整个上拉网络导通；`T3`导通，`T4`截止，所以整个下拉网络截止。此时输出信号Y也为逻辑1
    - 当A=1，B=1时，`T1`和`T2`截止，也就是上拉网络截止；`T3`和`T4`导通，也就是下拉网络导通，则输出信号Y为逻辑0。
    
    这个电路在两个输入信号均为逻辑1的时候，输出信号才为逻辑0，否则输出信号为逻辑1。我们就把产生这样输入输出效果的电子设备称之为一个`与非门`（NAND gate）
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2014.png)
    
- 上拉网络中的两个`pMOS管`串联，下拉网络中的两个`nMOS管`并联
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2015.png)
    
    - 当A=0，B=0时，`T1`和`T2`导通，也就是上拉网络导通；`T3`和`T4`截止，也就是下拉网络截止，则输出信号Y为逻辑1
    - 当A=0，B=1时，`T1`导通，`T2`截止，因为`T1`和`T2`是串联的，所以整个上拉网络截止；`T3`截止，`T4`导通，因为`T3`和`T4`是并联的，所以整个下拉网络导通。此时输出信号Y与接地电压相同，为逻辑0
    - 当A=1，B=0时，`T1`截止，`T2`导通，因为`T1`和`T2`是串联的，所以整个上拉网络截止；`T3`导通，`T4`截止，因为`T3`和`T4`是并联的，所以整个下拉网络导通。此时输出信号Y与接地电压相同，为逻辑0
    - 当A=1，B=1时，`T1`截止，`T2`导通，因为`T1`和`T2`是串联的，所以整个上拉网络截止；`T3`和`T4`导通，也就是下拉网络导通，则输出信号Y为逻辑0
    
    输入输出效果的电子设备称之为一个`或非门`（NOR gate）
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2016.png)
    

对于将两个输入信号（假设分别是A和B）合并为一个输出信号的电路，总共有4种输入情况:

- 输入情况一：A=0, B=0
- 输入情况二：A=0, B=1
- 输入情况三：A=1, B=0
- 输入情况四：A=1, B=1

每种输入情况产生的输出信号又有2种可能，所以其实理论上可以有`2⁴`，也就是16种输出情况

![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2017.png)

- 与门(AND gate)
    
    
    | A | B | Y |
    | --- | --- | --- |
    | 0 | 0 | 0 |
    | 0 | 1 | 0 |
    | 1 | 0 | 0 |
    | 1 | 1 | 1 |
    
    `与门`的输出信号正好和`与非门`相反，其实我们只要在`与非门`后边加上一个`反相器`就可以实现一个`与门`:
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2018.png)
    
    上边使用`CMOS电路`设计的`与非门`用了4个`MOS管`，非门用了2个`MOS管`，所以设计的这个与门就需要使用6个`MOS管`。`与门`还是很常用的，它是有它特有的电路符号的
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2019.png)
    
- 或门(OR gate)
    
    
    | A | B | Y |
    | --- | --- | --- |
    | 0 | 0 | 0 |
    | 0 | 1 | 1 |
    | 1 | 0 | 1 |
    | 1 | 1 | 1 |
    
     `或门`的输出信号正好和`或非门`相反，其实我们只要在`或非门`后边加上一个`反相器`就可以实现一个`或门`
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2020.png)
    
    我们刚设计的这个`或门`也需要使用6个`MOS管`。`或门`也是很常用的，它的电路符号
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2021.png)
    
- 异或门（XOR gate）
    
    
    | A | B | Y |
    | --- | --- | --- |
    | 0 | 0 | 0 |
    | 0 | 1 | 1 |
    | 1 | 0 | 1 |
    | 1 | 1 | 0 |
    
    `异或门`的电路符号如下所示:
    
    ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2022.png)
    
    用常见逻辑门来实现异或门，异或门特点：有当`A=0, B=1`和`A=1, B=0`这两种输入情况下才会让`Y=1`
    
    - 一个只有在`A=0, B=1`时输出信号才为逻辑1的设备，可以称之为`设备1`
        
        哪种逻辑门只有在一种输入情况下输出信号才为逻辑1，其他3种输入情况下输出都为逻辑0呢？很显然`与门`和`或非门`满足这种要求，我们以与门为例来制作`设备1`
        
        不过`与门`只有在两个输入信号都为逻辑1的情况下，输出信号才为逻辑1，我们这里要求只有在`A=0, B=1`时输出信号才为逻辑1，在输入信号A后边紧接着附加一个反相器就解决了，如图所示：
        
        ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2023.png)
        
    - 再做一个只有在`A=1, B=0`时输出信号才为逻辑1的设备，可以称之为`设备2`； 和制作`设备1`的情况类似，只要我们在输入信号B后边紧接着附加一个反相器就好了，如图所示
        
        ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2024.png)
        
    - 那么只要`设备1`和`设备2`中有一个设备的输出信号为逻辑1，那么整个电路的输出信号就为逻辑1
        
        两个输入信号只要一个为逻辑1，那么输出信号就是逻辑1的逻辑门是个啥？当然是`或门`，我们把`设备1`和`设备2`的输出信号作为一个`或门`的输入信号就满足了要求，就像这样：
        
        ![Untitled](%E6%99%B6%E4%BD%93%E7%AE%A1%E4%B8%8E%E9%80%BB%E8%BE%91%E9%97%A8%205b2969ac722c41229b5092a1f505f059/Untitled%2025.png)
        
        - 当`A=0, B=1`时，`设备1`输出逻辑1，那么整个电路就输出逻辑1；
        - 当`A=1, B=0`时，`设备2`输出逻辑1，那么整个电路也输出逻辑1；
        - 当`A=0, B=0`和`A=1, B=1`时，设备1和设备2都输出逻辑0，整个电路最终也都输出逻辑0

### 小结

- 关于逻辑门的实现
    
    就是对于同一个逻辑门来说，我们可以使用不同的材料来实现它，比方说继电器、真空管、晶体管啥的，说不定未来人类又发明出啥新材料，也可以用来实现这些逻辑门， 即使对于同一种材料来说，我们也可能会有不同的电路连接方式来实现这个逻辑门
    
- 关于逻辑门的抽象
    
    当我们已经知道某个逻辑门的特性时候，比方对于`与门`来说，只有在两个输入都是`1`的时候，最终的输出才能是`1`，其余的输入情况对应的输出都是`0`，我们就重点关注如何使用这种特性来满足我们更复杂的一些需求，而不去纠结这个逻辑门到底是使用什么物理器件实现的。我们说这个过程就是对`逻辑门`做了一个抽象的处理，对于使用逻辑门的人来说，只需要把逻辑门当作一个黑盒子，只去关注这个黑盒子的特性，而不需要关注它是如何实现的，这可以让使用逻辑门的人专注于解决更复杂的问题，而不必投入更多的精力去考虑实现的细节。
    
- 高阻态
    
    电路的一种输出状态，既不是高电平也不是低电平，如果高阻态再输入下一级电路的话，对下级电路无任何影响，和没接一样，如果用万用表测的话有可能是高电平也有可能是低电平，随它后面接的东西定的。